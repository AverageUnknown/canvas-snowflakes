<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body onresize="resizeCanvas()">
    <canvas id="myCanvas" width="200" height="200"></canvas>
    <script>
      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      resizeCanvas();
      context.clearRect(0,0,canvas.width,canvas.height);
      context.lineWidth = 1;
      context.strokeStyle = '#0000FF';

      function newSnowflake(){
          return {
              x: Math.random()*canvas.width,
              xv: 1,
              y: Math.random()*canvas.height,
              yv: 1,
              t: 250,

              draw:function() {
                  this.xv = Math.max(Math.min(Math.random()-.5 + this.xv,1.5),-1.5)
                  this.x = Math.max(Math.min(this.x + this.xv,canvas.width),0)
                  if (this.x == 0 || this.x == canvas.width){
                      this.xv = -this.xv;
                  }
                  this.yv = Math.max(Math.min(Math.floor(Math.random()/5)-.4 + this.yv,1.1),1)
                  this.y = this.y + this.yv
                  if (this.y > canvas.height){
                      this.y = 0;
                  }
                  context.save()
                  var time = new Date();
                  context.translate(this.x,this.y)
                  if (this.t < time.getMilliseconds()%500){
                      context.rotate(Math.PI/2)
                  }
                  for (var i = 0; i < 6; i++){
                      context.beginPath();
                      context.moveTo(0,0);
                      context.lineTo(6,0);
                      context.moveTo(3,0);
                      context.lineTo(5,1.5);
                      context.moveTo(3,0);
                      context.lineTo(5,-1.5)
                      context.stroke();
                      context.rotate(Math.PI / 3);
                      context.closePath();
                  }
                  context.restore()
              }
          }
      }

      var snowflakes = []
      for (var i = 0; i < 100; i++){
          snowflakes.push(newSnowflake())
      }

      function drawSnowflakes(){
          context.clearRect(0,0,canvas.width,canvas.height);
          snowflakes.forEach(function(element){
              element.draw();
          });
          window.requestAnimationFrame(drawSnowflakes)
      }

      drawSnowflakes()

      function resizeCanvas(){
          canvas.width = window.outerWidth;
          canvas.height = window.outerHeight;
          context.strokeStyle = '#0000FF';
      }
    </script>
  </body>
</html>
